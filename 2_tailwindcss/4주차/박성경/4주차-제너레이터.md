# ğŸ¯ parseCandidate()ì™€ ì œë„ˆë ˆì´í„°

<!-- ### `candidate.ts`ì˜ parseCandidate()ì—ì„œ ì²˜ë¦¬í•˜ëŠ” ì„ì˜ê°’ ì¢…ë¥˜

| ì¢…ë¥˜     | íŒ¨í„´             | ì˜ˆì‹œ              |
| ------ | -------------- | --------------- |
| ì„ì˜ ì†ì„±  | `[ì†ì„±:ê°’]`       | `[color:red]`   |
| ëŒ€ê´„í˜¸ ê°’  | `ìœ í‹¸ë¦¬í‹°-[ê°’]`     | `bg-[#ff0000]`  |
| CSS ë³€ìˆ˜ | `ìœ í‹¸ë¦¬í‹°-(--var)` | `bg-(--my-var)` | -->

## `yield` í‚¤ì›Œë“œ ê°œìš”
`yield`ëŠ” **ì œë„ˆë ˆì´í„° í•¨ìˆ˜** ë‚´ì—ì„œ ì‚¬ìš©ë˜ëŠ” í‚¤ì›Œë“œë¡œ, í•¨ìˆ˜ì˜ ì‹¤í–‰ì„ ì¼ì‹œ ì¤‘ì§€í•˜ê³  ê°’ì„ í˜¸ì¶œìì—ê²Œ ë°˜í™˜í•©ë‹ˆë‹¤. ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” ì¼ë°˜ í•¨ìˆ˜ì™€ ë‹¬ë¦¬ **ì—¬ëŸ¬ ë²ˆì— ê±¸ì³** ê°’ì„ ìƒì„±í•  ìˆ˜ ìˆìœ¼ë©°, `yield`ë¥¼ í†µí•´ ê° ê°’ì„ ìˆœì°¨ì ìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.
### 1) `function*` = Generator ìƒì„± í•¨ìˆ˜

**iteratorë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜**ë¥¼ ì •ì˜
### 2) `yield` = ê²°ê³¼ í•˜ë‚˜ ë°©ì¶œ

`yield` í•  ë•Œë§ˆë‹¤ iteratorê°€ `next()` í˜¸ì¶œë  ë•Œ ê·¸ ê°’ì„ êº¼ë‚¼ ìˆ˜ ìˆìŒ.

```typescript
function* test() { // ì œë„ˆë ˆì´í„° í•¨ìˆ˜ ì •ì˜
  yield 1
  yield 2
  yield 3
}

const iter = test()

console.log(iter.next()) // { value: 1, done: false }
console.log(iter.next()) // { value: 2, done: false }
console.log(iter.next()) // { value: 3, done: false }
console.log(iter.next()) // { value: undefined, done: true }
```

## `parseCandidate` í•¨ìˆ˜ì—ì„œ `yield` ì‚¬ìš©ë²•

**Tailwind CSS í´ë˜ìŠ¤ í›„ë³´(candidate)ë¥¼ í•˜ë‚˜ì”© ìƒì„±**í•˜ëŠ” ë° ì‚¬ìš©.
```typescript
export function* parseCandidate(input: string, designSystem: DesignSystem): Iterable<Candidate> {
  // ... íŒŒì‹± ë¡œì§ ...
  
  // Static ìœ í‹¸ë¦¬í‹° ìƒì„±
  if (designSystem.utilities.has(base, 'static') && !base.includes('[')) {
    yield {
      kind: 'static',
      root: base,
      variants: parsedCandidateVariants,
      important,
      raw: input,
    }
  }

  // Arbitrary ì†ì„± ìƒì„±
  yield {
    kind: 'arbitrary',
    property,
    value,
    modifier: parsedModifier,
    variants: parsedCandidateVariants,
    important,
    raw: input,
  }

  // Functional ìœ í‹¸ë¦¬í‹° ìƒì„±
  for (let [root, value] of roots) {
    yield candidate
  }

  // ìœ íš¨í•œ í›„ë³´ê°€ ì—†ìœ¼ë©´ ì¢…ë£Œ
  if (/* í›„ë³´ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŒ */) {
    return // ì œë„ˆë ˆì´í„° ì¢…ë£Œ
  }

  ... ê¸°íƒ€ íŒŒì‹± ë¡œì§ ...
}
```
`Iterable<Candidate>` ë¥¼ ë¦¬í„´, ì•„ë˜ì²˜ëŸ¼ ìˆœíšŒ ê°€ëŠ¥í•œ ê°’.
```ts
for (const c of parseCandidate("hover:focus:underline", designSystem)) {
  console.log(c)
}
```

## ì™œ yieldë¥¼ ì‚¬ìš©í•˜ë‚˜?

`return`ê³¼ì˜ ì°¨ì´ - **ì—¬ëŸ¬ ê°œì˜ ê²°ê³¼ë¥¼ í•˜ë‚˜ì”© ë‚´ë³´ë‚´ê¸° ìœ„í•´** ì‚¬ìš©<br>
í•œ ë²ˆë§Œ `return` í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼ í•„ìš”í•  ë•Œë§ˆë‹¤ `yield` í•´ì„œ **ê²°ê³¼ë¥¼ ìŠ¤íŠ¸ë¦¼ì²˜ëŸ¼ í˜ë ¤ë³´ë‚´ëŠ” êµ¬ì¡°**

### 1. **ì§€ì—° í‰ê°€(Lazy Evaluation)**
- **ë°°ì—´**: í•œ ë²ˆì— ëª¨ë“  ê°’ì„ ë§Œë“¤ì–´ì„œ ë©”ëª¨ë¦¬ì— ì˜¬ë¦¼
- **Generator + yield**: í•„ìš”í•  ë•Œë§ˆë‹¤ í•˜ë‚˜ì”© ë§Œë“¤ì–´ì„œ ë°˜í™˜í•˜ê³  ë°”ë¡œ ë²„ë¦¼
````typescript
// í•œ ë²ˆì— ëª¨ë“  í›„ë³´ë¥¼ ìƒì„±í•˜ì§€ ì•ŠìŒ
let candidates = parseCandidate('hover:bg-red-500', designSystem)

// ì‹¤ì œë¡œ ìˆœíšŒí•  ë•Œ í•˜ë‚˜ì”© ìƒì„±ë¨
for (let candidate of candidates) {
  // ê° í›„ë³´ê°€ í•„ìš”í•  ë•Œë§Œ ìƒì„±ë¨
  console.log(candidate)
}
````
- ëª¨ë“  ê°€ëŠ¥í•œ í›„ë³´ë¥¼ í•œë²ˆì— ìƒì„±í•˜ì§€ ì•Šê³  **í•„ìš”í•  ë•Œë§ˆë‹¤** í•˜ë‚˜ì”© ìƒì„±
- ëŒ€ëŸ‰ì˜ í´ë˜ìŠ¤ í›„ë³´ ì²˜ë¦¬ ì‹œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”

### 2. **ì¡°ê±´ë¶€ ìƒì„±**
- íŒŒì‹± ê³¼ì •ì—ì„œ ìœ íš¨í•œ í›„ë³´ë§Œ `yield`ë¡œ ë°˜í™˜
- ë¬´íš¨í•œ í›„ë³´ëŠ” `return`ìœ¼ë¡œ ì¡°ê¸° ì¢…ë£Œ

### 3. **ë‹¤ì¤‘ ë§¤ì¹˜ ì§€ì›**
bg-red-500/75 ì—ì„œ `/75` ëŠ” modifierì„. (ìœ í‹¸ë¦¬í‹° ë’¤ì— ë¶™ëŠ” ì¶”ê°€ ê°’)
- í•˜ë‚˜ì˜ ì…ë ¥ ë¬¸ìì—´ì´ ì—¬ëŸ¬ ìœ íš¨í•œ í›„ë³´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŒ<br>
**ì˜ˆì‹œ)** `w-1/2` â†’ `w-1/2`(fraction) ì™€ `w-1` + `2`(modifier) ë¡œ í•´ì„ ê°€ëŠ¥<br>

```ts
yield { kind: 'fraction', root: 'w', value: '1/2' }
yield { kind: 'dynamic-modifier', root: 'w-1', modifier: '2' } 
```
- ê°ê°ì„ ê°œë³„ì ìœ¼ë¡œ `yield` -> í›„ë³´ê°€ ì—¬ëŸ¬ ê°œ ìƒì„±ë¨